# Echo with Swagger docs

> * https://github.com/swaggo/echo-swagger
> * https://github.com/swaggo/swag

###### 1. install swagger tool globally thru golang

```sh
# go 1.16+
go install github.com/swaggo/swag/cmd/swag@latest
```

###### 2. main.go

```go
package main

import (
	"fmt"
	"net/http"

	"github.com/swaggo/echo-swagger"
	"github.com/labstack/echo/v4"

	_ "echo-swagger-test/docs" // generated by "swag init" and import here
)

type User struct {
	Name string `json:"name"`
	Surname string `json:"surname"`
}
type HTTPError struct {
	Code    int    `json:"code" example:"400"`
	Message string `json:"message" example:"status bad request"`
}

const PORT = "3000"

// @title My applikuchen API
// @version 1.0
// @description This is a echo server with swagger docs
func main() {
	r := echo.New()
	r.HideBanner = true 
	r.HidePort   = true
	
	r.GET("/swagger/*", echoSwagger.WrapHandler)
	
	r.GET("/", getUsers)

	fmt.Println("App is launching " + PORT + " ....")
	r.Logger.Fatal(r.Start(":"+PORT))
}


// https://github.com/swaggo/swag#api-operation
// example: https://github.com/swaggo/swag/blob/master/example/celler/controller/accounts.go

// @Summary      List users
// @Description  get users
// @Tags         User
// @Accept       json
// @Produce      json
// @Success      200  {array}   User
// @Failure      400  {object}  HTTPError
// @Failure      404  {object}  HTTPError
// @Failure      500  {object}  HTTPError
// @Router       /users [get]
func getUsers(c echo.Context) error {
	return c.JSON(http.StatusOK, []User{
		{ Name: "Oleg", Surname: "Einstein" },
	})
}

```


###### 3. run.bat

```batch
@ECHO OFF
SETLOCAL
chcp 866>nul
CLS

SET BUILD_PATH=.\tester

SET GO111MODULE=auto
SET GOMODCACHE=%CD%\packages

REM recreate swagger "docs" folder
swag init --exclude packages

REM download all packages that project needs
go mod tidy

ECHO Building service...
go build -o %BUILD_PATH%.exe

rem start in dev mode (default)
%BUILD_PATH%.exe
```
